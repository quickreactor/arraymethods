<head>
    <script src="tinytest.js"></script>
    <script>
        
        //The lastIndexOf() method returns the last index at which a given element can be found in the array, or -1 if it is not present.
        // The array is searched backwards, starting at fromIndex.

        // Syntax
        // arr.lastIndexOf(searchElement[, fromIndex])

        // Parameters
            // searchElement
            // Element to locate in the array.

            // fromIndex Optional
            // The index at which to start searching backwards. Defaults to the array's length minus one (arr.length - 1), i.e.
            // the whole array will be searched. If the index is greater than or equal to the length of the array, the whole array will be searched.
            // If negative, it is taken as the offset from the end of the array. Note that even when the index is negative,
            // the array is still searched from back to front. If the calculated index is less than 0, -1 is returned, i.e. the array will not be searched.
        
        // Return value
        // The last index of the element in the array; -1 if not found.


        function lastIndexOf (array, searchElement, fromIndex) {
            let startingIndex = array.length-1; // Default
            if (fromIndex < array.length) {
                startingIndex = fromIndex;
            }
            if (fromIndex < 0) {
                startingIndex = array.length + fromIndex;
                if (startingIndex < 0) {
                    return -1;
                }
            }
            for (let i = startingIndex; i >= 0; i--) {
                if (array[i] === searchElement) {
                    return i;
                };
                
            }
            return -1;
        };
        

        tests({
            'It should immediately return the index of the matching item when a match is found': function() {
                var result = lastIndexOf([1,2,3], 3);
                eq(result, 2);
            },
            'It should search from right to left': function() {
                var result = lastIndexOf([2,2,3], 2);
                eq(result, 1);
            },
            'It should start searching at the index passed in as the 3rd callback': function() {
                var array = [2,2,2,3];
                var result = lastIndexOf(array, 2, 1);
                eq(result, 1);
            },
            'If the fromIndex parameter is greater than or equal to the arrays length the whole array should be searched': function() {
                var array = [1,2,3,4];
                var result = lastIndexOf(array, 1, 4);
                eq(result, 0);
            },
            'If fromIndex is negative it is taken as the offset from the end of the array': function() {
                var array = [1,1,1,1];
                var result = lastIndexOf(array, 1, -2);
                eq(result, 2);
            },
            'If the calculated index is less than 0, return -1 without searching': function() {
                var array = [1,2,1,4];
                var result = lastIndexOf(array, 4, -5);
                eq(result, -1);
            },
            'If no provided index, fromIndex defaults to array.length-1; whole array is searched': function() {
                var array = [1,2,3,4];
                var result = lastIndexOf(array, 1);
                eq(result, 0);
            },
            'It should return -1 if no match': function() {
                var result = lastIndexOf([1,2,3], 4, 0);
                eq(result, -1);
            }
        });



    </script>
  </head>
  <body>
    
  </body>
  